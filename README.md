# IconLiberator

### A bash script to restore macOS application icons trapped in the _squircle jail_

With the latest version of macOS, 26 Tahoe, Apple introduced a new icon format, that now must fit into the predefined _squircle_ shape. Icons that fail to fit within the squircle are shrunk and placed above an ugly grey background.

However, many app icons are _creative_ and do not fit well into this format. Examples include Audio Hijack, BBEdit, Alfred, Amphetamine, VLC, NValt, Gemini 2, HandBrake and Keyboard Maestro. The Tahoe transformation makes these icons unattractive and often barely visible.

Users of these apps are faced with a choice: either wait for the developers to update their apps with new Tahoe-compatible icons, or restore the appearance of the original icons, as seen in Sequoia or older versions of macOS.

IconLiberator is a small Bash script that can do that. To use it, clone the repository or download the ZIP file, open the Terminal, `cd` to the directory of the repository, and then run:

```
./icon_liberator -f applist.txt
```

where the file `applist.txt` contains the list of apps that should be updated.

All changes can be reverted by running  

```
./icon_liberator -f applist.txt -u
```

that restores the appearance of icons as generated by Tahoe.

Changing the content of the `applist.txt` allows to choose the app that are processed by the script and those that are left untouched.


### Customization

The current `applist.txt` file lists a few common apps whose icons can be fixed by the script together with, when necessary, the name of the icon file used by the app.

Before using the script it is thus better to customize the list of apps by deleting (or simply commenting out) the names of the apps that are not used and adding those specific to one's system.

The script automatically finds the icon to use when its name corresponds to that of the app. 

Unfortunately, as can easily be seen by inspecting the list, in many cases the icon names differ from the app names and must be found manually. This involves right-clicking on the application, selecting `Show Package Contents`, opening the `Contents` folder, then the `Resources` folder, and finding the correct icon file (which has a `.icns` extension). 

Please note that some apps can have several icon files within the `Resources` folder, so it may be necessary to pay some attention to finding the right icon.


### Notes

- After running the script a log file will list all the apps that have been their icons changed by the script.

- The first time the `icon_liberator` script is run, macOS will refuse to perform the required operations and show a notification warning that 'Terminal' has been prevented from modifying apps on your Mac. Click on the `Allow...` button to be redirected to `System Settings` > `Privacy & Security` > `App Management` and toggle the switch next to the `Terminal`. Run the script again and this time it should work as expected.

- To change the icons of the apps downloaded from the App Store, it is necessary to run the script with `sudo` privileges.


### Caveats

- The script does **not change** the app itself in any way; it only automates the changes that can be made by right-clicking the app in the Applications folder and choosing `Get Info`.

- As previously mentioned, al changes can be reverted by running the script with the `-u` switch.

- The associated `fileicon` command does the heavy work and shoud be normally left as-is. However, Homebrew users can install `fileicon` with `brew install fileicon` and safey delete the downloaded version.


### Acknowledgements

This project gratefully depends on the `fileicon` macOS CLI for managing custom icons for files and folders, by Michael Klement,  [https://github.com/mklement0/fileicon](https://github.com/mklement0/fileicon).